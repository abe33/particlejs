(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O={}.hasOwnProperty,M=function(e,t){function r(){this.constructor=e}for(var n in t)O.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};this.particlejs||(this.particlejs={}),N=function(){function e(){this.listeners=[]}return e.prototype.add=function(e,t,n){n==null&&(n=0);if(!this.registered(e,t))return this.listeners.push([e,t,!1,n]),this.sortListeners()},e.prototype.addOnce=function(e,t,n){n==null&&(n=0);if(!this.registered(e,t))return this.listeners.push([e,t,!0,n]),this.sortListeners()},e.prototype.remove=function(e,t){if(this.registered(e,t))return this.listeners.splice(this.indexOf(e,t),1)},e.prototype.removeAll=function(){return this.listeners=[]},e.prototype.indexOf=function(e,t){var n,r,i,s,o,u,a;u=this.listeners;for(r=s=0,o=u.length;s<o;r=++s){a=u[r],i=a[0],n=a[1];if(e===i&&t===n)return r}return-1},e.prototype.registered=function(e,t){return this.indexOf(e,t)!==-1},e.prototype.sortListeners=function(){if(this.listeners.length<=1)return;return this.listeners.sort(function(e,t){var n,r,i;return i=[e[3],t[3]],n=i[0],r=i[1],n<r?1:r<n?-1:0})},e.prototype.dispatch=function(){var e,t,n,r,i,s,o,u,a;n=this.listeners.concat(),a=[];for(s=0,o=n.length;s<o;s++)u=n[s],t=u[0],e=u[1],r=u[2],i=u[3],t.apply(e,arguments),r?a.push(this.remove(t,e)):a.push(void 0);return a},e}(),A=(typeof window!="undefined"&&window!==null?window.requestAnimationFrame:void 0)||(typeof window!="undefined"&&window!==null?window.webkitRequestAnimationFrame:void 0)||(typeof window!="undefined"&&window!==null?window.mozRequestAnimationFrame:void 0)||(typeof window!="undefined"&&window!==null?window.oRequestAnimationFrame:void 0)||(typeof window!="undefined"&&window!==null?window.msRequestAnimationFrame:void 0)||function(){return setTimeout(callback,1e3/60)},i=function(e){function t(e){this.timeScale=e!=null?e:1,t.__super__.constructor.call(this),this.running=!1}return M(t,e),t.instance=function(){return this._instance||(this._instance=new t)},t.prototype.add=function(e,n,r){r==null&&(r=0),t.__super__.add.call(this,e,n,r);if(this.hasListeners()&&!this.running)return this.start()},t.prototype.remove=function(e,n,r){r==null&&(r=0),t.__super__.remove.call(this,e,n,r);if(this.running&&!this.hasListeners())return this.stop()},t.prototype.hasListeners=function(){return this.listeners.length>0},t.prototype.start=function(){return this.running=!0,this.initRun()},t.prototype.stop=function(){return this.running=!1},t.prototype.initRun=function(){var e=this;return this.time=this.getTime(),A(function(){return e.run()})},t.prototype.run=function(){var e,t,n;return this.stats!=null,this.running&&(t=this.getTime(),e=(t-this.time)*this.timeScale,this.dispatch(e,e/1e3,t),this.initRun()),(n=this.stats)!=null?n.end():void 0},t.prototype.getTime=function(){return(new Date).getTime()},t}(N),e=function(){function e(){}return e.prototype.prepare=function(e,t,n){this.bias=e,this.biasInSeconds=t,this.time=n},e}(),a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),t.prototype.process=function(e){e.life+=this.bias;if(e.life>=e.maxLife)return e.die()},t}(e),f=function(e){function t(e){this.actions=e!=null?e:[]}return M(t,e),t.prototype.prepare=function(e,t,n){var r,i,s,o,u;o=this.actions,u=[];for(i=0,s=o.length;i<s;i++)r=o[i],u.push(r.prepare(e,t,n));return u},t.prototype.process=function(e){var t,n,r,i,s;i=this.actions,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(t.process(e));return s},t}(e),h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),t.prototype.process=function(e){return e.position.x+=e.velocity.x*this.biasInSeconds,e.position.y+=e.velocity.y*this.biasInSeconds},t}(e),p=function(){function e(){}return e.prototype.prepare=function(){},e.prototype.process=function(){},e}(),t=function(){function e(e){this.rate=e!=null?e:1,this.count=0,this.rest=0}return e.prototype.prepare=function(e,t,n){return this.rest+=t*this.rate,this.count=Math.floor(this.rest),this.rest-=this.count},e}(),d=function(){function e(){}return e.prototype.count=0,e.prototype.prepare=function(){},e}(),r=function(){function e(e,t,n,r,i){this.particleType=e!=null?e:y,this.emitter=t!=null?t:new v,this.timer=n!=null?n:new g,this.counter=r!=null?r:new d,this.initializer=i!=null?i:null}return e.prototype.prepare=function(e,t,n){var r;return this.timer.prepare(e,t,n),r=this.timer.nextTime,this.counter.prepare(r,r/1e3,n),this.currentCount=this.counter.count,this.currentTime=r,this.iterator=0},e.prototype.hasNext=function(){return this.iterator<this.currentCount},e.prototype.next=function(){var e,t;return e=this.particleType.get({position:this.emitter.get()}),(t=this.initializer)!=null&&t.initialize(e),this.iterator++,e},e.prototype.nextTime=function(){return this.currentTime-this.iterator/this.currentCount*this.currentTime},e.prototype.finished=function(){return this.timer.finished()},e}(),w=geomjs.Point,v=function(){function e(){}return e.prototype.get=function(){return new w},e}(),b=function(){function e(e,t){this.path=e,this.random=t,this.initRandom()}return T.attachTo(e),e.prototype.get=function(){return this.path.pathPointAt(this.random.get())},e}(),w=geomjs.Point,E=function(){function e(e){this.point=e!=null?e:new w}return e.prototype.get=function(){return this.point.clone()},e}(),C=function(){function e(e,t){this.surface=e,this.random=t,this.initRandom()}return T.attachTo(e),e.prototype.get=function(){return this.surface.randomPointInSurface(this.random)},e}(),o=function(){function e(e){this.life=e}return e.prototype.initialize=function(e){return e.maxLife=this.life},e}(),m=function(){function e(){}return e.prototype.initialize=function(){},e}(),c=geomjs.Mixin,S=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),t.included=function(e){return e.resetPools=function(){return this.allocated=[],this.pooled=[]},e.get=function(t){var n,r,i;t==null&&(t={}),this.pooled.length>0?n=this.pooled.shift():n=new e,typeof n.init=="function"&&n.init();for(r in t)i=t[r],n[r]=i;return this.allocated.push(n),n},e.release=function(e){var t;return t=this.allocated.indexOf(e),e.dispose(),this.allocated.splice(t,1),this.pooled.push(e)},e.resetPools()},t}(c),c=geomjs.Mixin,x=chancejs.Random,l=chancejs.MathRandom,n=new x(new l),T=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),t.prototype.initRandom=function(){return this.random||(this.random=n)},t}(c),w=geomjs.Point,y=function(){function e(){}return S.attachTo(e),e.prototype.init=function(){return this.dead=!1,this.life=0,this.maxLife=0,this.position=new w,this.lastPosition=new w,this.velocity=new w,this.parasites={}},e.prototype.dispose=function(){return this.position=null,this.lastPosition=null,this.velocity=null,this.parasites=null},e.prototype.die=function(){return this.dead=!0,this.life=this.maxLife},e.prototype.revive=function(){return this.dead=!1,this.life=0},e}(),k=function(){function e(e,t){this.initializer=e!=null?e:new m,this.action=t!=null?t:new p,this.particlesCreated=new N,this.particlesDied=new N,this.emissionStarted=new N,this.emissionFinished=new N,this.particles=[],this.emissions=[]}return e.prototype.emit=function(e){return this.emissions.push(e),e.system=this,this.startEmission(e)},e.prototype.startEmission=function(e){return e.prepare(0,0,this.getTime()),this.created=[],this.died=[],this.running||this.start(),this.processEmission(e),this.emissionStarted.dispatch(this,e),this.created.length>0&&this.particlesCreated.dispatch(this,this.created),this.died.length>0&&this.particlesDied.dispatch(this,this.died),this.died=null,this.created=null},e.prototype.start=function(){if(!this.running)return i.instance().add(this.tick,this),this.running=!0},e.prototype.stop=function(){if(this.running)return i.instance().remove(this.tick,this),this.running=!1},e.prototype.tick=function(e,t,n){return this.died=[],this.created=[],this.processParticles(e,t,n),this.emitting()&&this.processEmissions(e,t,n),this.created.length>0&&this.particlesCreated.dispatch(this,this.created),this.died.length>0&&this.particlesDied.dispatch(this,this.died),this.died=null,this.created=null},e.prototype.emitting=function(){return this.emissions.length>0},e.prototype.processEmissions=function(e,t,n){var r,i,s,o,u;o=this.emissions.concat(),u=[];for(i=0,s=o.length;i<s;i++)r=o[i],r.prepare(e,t,n),u.push(this.processEmission(r));return u},e.prototype.processEmission=function(e){var t,n,r;r=[];while(e.hasNext())n=e.nextTime(),t=e.next(),this.created.push(t),this.registerParticle(t),this.initializeParticle(t,n),e.finished()?(this.removeEmission(e),r.push(this.emissionFinished.dispatch(this,e))):r.push(void 0);return r},e.prototype.removeEmission=function(e){return this.emissions.splice(this.emissions.indexOf(e),1)},e.prototype.processParticles=function(e,t,n){var r,i,s,o,u;this.action.prepare(e,t,n),o=this.particles.concat(),u=[];for(i=0,s=o.length;i<s;i++)r=o[i],this.action.process(r),r.dead?u.push(this.unregisterParticle(r)):u.push(void 0);return u},e.prototype.initializeParticle=function(e,t){this.initializer.initialize(e),this.action.prepare(t,t/1e3,this.getTime()),this.action.process(e);if(e.dead)return this.unregisterParticle(e)},e.prototype.registerParticle=function(e){return this.particles.push(e)},e.prototype.unregisterParticle=function(e){return this.died.push(e),this.particles.splice(this.particles.indexOf(e),1),e.constructor.release(e)},e.prototype.getTime=function(){return(new Date).valueOf()},e}(),s=function(){function e(){}return e.prototype.prepare=function(){},e.prototype.finished=function(){return!0},e.prototype.nextTime=function(){return 0},e}(),u=function(){function e(e,t){this.duration=e!=null?e:1e3,this.since=t!=null?t:0,this.time=0,this.nextTime=0}return e.prototype.prepare=function(e,t,n){return this.firstTime?this.nextTime=e:(this.nextTime=this.since+e,this.firstTime=!0),this.time+=e},e.prototype.finished=function(){return this.time>=this.duration},e}(),g=function(){function e(){}return e.prototype.nextTime=0,e.prototype.prepare=function(){},e.prototype.finished=function(){return!0},e}(),L=function(e){function t(e){t.__super__.constructor.call(this,Infinity,e)}return M(t,e),t.prototype.finished=function(){return!1},t}(u),this.particlejs.Signal=N,this.particlejs.Impulse=i,this.particlejs.BaseAction=e,this.particlejs.Live=a,this.particlejs.MacroAction=f,this.particlejs.Move=h,this.particlejs.NullAction=p,this.particlejs.ByRate=t,this.particlejs.NullCounter=d,this.particlejs.Emission=r,this.particlejs.NullEmitter=v,this.particlejs.Path=b,this.particlejs.Ponctual=E,this.particlejs.Surface=C,this.particlejs.Life=o,this.particlejs.NullInitializer=m,this.particlejs.Poolable=S,this.particlejs.Randomizable=T,this.particlejs.Particle=y,this.particlejs.System=k,this.particlejs.Instant=s,this.particlejs.Limited=u,this.particlejs.NullTimer=g,this.particlejs.Unlimited=L}).call(this)